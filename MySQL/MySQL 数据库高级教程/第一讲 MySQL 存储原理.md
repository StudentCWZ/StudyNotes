# 第一讲 MySQL 存储原理

## 1.1 为什么要使用索引

1. 在海量数据中进行查询某条记录的场景是经常发生的，那么如何提升查询性能，就跟要查询的数据字段是否有索引有关系。如果字段加了索引，那么查询的性能就非常快！
   - **索引为什么快？**
   - **索引到底是什么？**
   - **在使用索引的时候要注意什么的事项？**

## 1.2 索引是什么

1. 查字典的方式？ ==> 通过目录来查，能够快速的定位到目标数据所在的页码。

2. 全表扫描方式 ==> 没有使用索引，进行多次磁盘 I/O，造成了较大的性能开销。(类比 ==> 逐页翻字典场景)
3. 为数据库某个字段创建索引，相当是为这个字段的内容建立了一个目录。通过这个目录，可以快速的实现数据的定位，也就是通过索引能够快速的找到某条数据所在磁盘位置。
4. 现在的疑问？
   - 索引存放位置
   - 索引的分类及如何分类
   - 索引使用了哪种数据结构：各种数据结构的查询性能进行分析

## 1.3 索引存放的位置

1. 对于 Mac 系统，在 `/usr/local/mysql` 文件夹中，对于 Win 系统 `C:/programdata/mysql(隐藏文件夹)`
   - **InnoDB 存储引擎的表: 将索引和数据存放在同一个文件里(为什么？有什么优势？)**
     - `索引+数据`: `*.ibd`
   - **MyISAM 存储引擎的表: 索引和数据分开两个文件来存储**
     - **索引**: `*.MYI`
     - **数据**: `*.MYD`

## 1.4 索引的分类

1. **主键索引: 主键自带索引效果，也就意味着通过主键来查询表中的记录，性能是非常好的。**

2. **普通索引: 为普通列创建的索引**

   - **创建普通索引命令**

     ```SQL
     # 格式
     create index 索引名称 on 表名(列名);
     # 例子
     create index idx_name on employees(name);
     ```

3. **唯一索引: 就像是唯一列，列中的数据是唯一的。比普通索引的性能要好**

   - **创建唯一索引**

     ```SQL
     # 格式
     create unique index 索引名称 on 表名(列名);
     # 例子
     create index idx_name on employees(name);
     ```

4. **联合索引(组合索引): 一次性为表中的多个字段一起创建索引。注意: 一个联合索引建议不要超过五个字段**

   - **创建联合索引**

     ```SQL
     # 格式
     create unique index 索引名称 on 表名(列 1, 列 2, 列 3);
     # 例子
     create index idx_name_age_position on employees(name, age, position);
     ```

5. **全文索引: MyISAM 存储引擎支持全文索引，在实际生产环境中，并不会使用 MySQL 提供的 MyISAM 存储引擎的全文索引功能来实现全文查找，而是会使用第三方的搜索引擎中间件，比如 ElastSearch、solr**
