# 第二讲 MySQL 主从复制

## 2.1 概述

1. 主从复制是指将主数据库的 DDL 和 DML 操作通过二进制日志传到从库服务器中，然后在从库上对这些日志重新执行(也叫重做)。从而使得从库和主库的数据保持同步
2. MySQL 支持一台主库同时向多台从库进行复制，从库同时也可以作为其他从服务器的主库，实现链状复制。
3. MySQL 主从复制的优点包含以下三个方面
   - **主库出现问题，可以快速切换到从库提供服务**
   - **实现读写分离，降低主库的访问压力**
   - **可以在从库中执行备份，以避免备份期间影响主库服务**

## 2.2 原理

1. MySQL 的主从复制如下

   <img src="https://studentcwz-pic-bed.oss-cn-guangzhou.aliyuncs.com/img/MySQL%20%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png" alt="MySQL 主从复制原理" style="zoom:50%;" />

2. 从上图来看，复制分成三步
   - **Master 主库在事务提交时，会把数据变更记录在二进制日志文件 Binlog 中**
   - **从库读取主库的二进制文件 Binlog，写入从库的中继日志 Relay Log。**
   - **slave 重做中继日志中的事件，将改变反映它自己的数据。**

## 2.3 搭建

